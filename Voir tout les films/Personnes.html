<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CineForAll - Gestion des Films</title>
    <link href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <header class="main-header">
        <div class="logo-container">
            <img src="img/logo.jpeg" alt="Logo CineForAll" class="logo">
        </div>
        <nav class="main-nav">
            <ul>
                <li><a href="index.html">Accueil</a></li>
                <li><a href="recherche-film.html">Films</a></li>
                <li><a href="recherche-acteur.html">Acteurs</a></li>
                <li><a href="admin.html" class="cta-login">Admin</a></li>
            </ul>
        </nav>
    </header>

    <main class="admin-main">
        <section class="admin-content">
            <h1>Gestion des Films</h1>
            <a href="admin.html" class="back-link">← Retour au Tableau de Bord</a>

            <div class="admin-toolbar">
                <div class="search-group">
                    <input type="text" id="searchInput" placeholder="Rechercher un film par titre..." onkeyup="filtrerFilms()">
                </div>
                
                <div class="filter-group">
                    <select id="genreSelect" onchange="filtrerFilms()">
                        <option value="tout">Tous les genres</option>
                        <option value="Science-fiction">Science-fiction</option>
                        <option value="Action">Action</option>
                        <option value="Drame">Drame</option>
                        <option value="Comédie">Comédie</option>
                    </select>
                </div>

                <button class="add-btn" onclick="alert('Ouvrir formulaire ajout')">+ Ajouter un Film</button>
            </div>
            
            <div class="table-container">
                <h2>Liste des Films du Catalogue</h2>
                <table class="admin-table" id="filmsTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Affiche</th>
                            <th>Titre</th>
                            <th>Genre</th>
                            <th>Année</th>
                            <th>Réalisateur</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td><img src="img/film1.jpg" alt="Affiche" class="mini-img"></td> <td class="film-title">Dune : Deuxième Partie</td>
                            <td class="film-genre">Science-fiction</td>
                            <td>2024</td>
                            <td>Denis Villeneuve</td>
                            <td>
                                <button class="edit-btn">Modifier</button>
                                <button class="delete-btn">Supprimer</button>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td><img src="img/film2.jpg" alt="Affiche" class="mini-img"></td>
                            <td class="film-title">Oppenheimer</td>
                            <td class="film-genre">Drame</td>
                            <td>2023</td>
                            <td>Christopher Nolan</td>
                            <td>
                                <button class="edit-btn">Modifier</button>
                                <button class="delete-btn">Supprimer</button>
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td><img src="img/film3.jpg" alt="Affiche" class="mini-img"></td>
                            <td class="film-title">Tenet</td>
                            <td class="film-genre">Action</td>
                            <td>2020</td>
                            <td>Christopher Nolan</td>
                            <td>
                                <button class="edit-btn">Modifier</button>
                                <button class="delete-btn">Supprimer</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p id="noResult" style="display:none; text-align:center; margin-top:20px; color:#666;">Aucun film trouvé.</p>
            </div>
        </section>
    </main>

    <footer>
        <p>© 2025 CineForAll - Tous droits réservés.</p>
    </footer>

    <script>
        function filtrerFilms() {
            var input, filter, table, tr, tdTitre, tdGenre, i, txtValueTitre, genreSelect, selectedGenre;
            input = document.getElementById("searchInput");
            filter = input.value.toUpperCase();
            genreSelect = document.getElementById("genreSelect");
            selectedGenre = genreSelect.value;
            
            table = document.getElementById("filmsTable");
            tr = table.getElementsByTagName("tr");
            var foundAny = false;

            for (i = 1; i < tr.length; i++) { // On commence à 1 pour sauter l'en-tête
                tdTitre = tr[i].getElementsByClassName("film-title")[0];
                tdGenre = tr[i].getElementsByClassName("film-genre")[0];
                
                if (tdTitre && tdGenre) {
                    txtValueTitre = tdTitre.textContent || tdTitre.innerText;
                    var genreValue = tdGenre.textContent || tdGenre.innerText;

                    // Vérifie si le titre correspond à la recherche ET si le genre correspond à la sélection
                    var matchesSearch = txtValueTitre.toUpperCase().indexOf(filter) > -1;
                    var matchesGenre = (selectedGenre === "tout") || (genreValue === selectedGenre);

                    if (matchesSearch && matchesGenre) {
                        tr[i].style.display = "";
                        foundAny = true;
                    } else {
                        tr[i].style.display = "none";
                    }
                }       
            }
            // Afficher un message si rien n'est trouvé
            document.getElementById("noResult").style.display = foundAny ? "none" : "block";
        }
    </script>
</body>
</html>